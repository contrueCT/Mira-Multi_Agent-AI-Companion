# Â∞èÊ¢¶ÔºàMiraÔºâ- ÊÉÖÊÑüÈô™‰º¥Êô∫ËÉΩ‰Ωì

> **English Version Available** | [English documentation is available at the bottom of this README](#english-version)

‰∏Ä‰∏™Ê∏©ÊöñËÄåÊô∫ÊÖßÁöÑ AI ‰ºô‰º¥ÔºåÂü∫‰∫é Microsoft AutoGen v0.4 Âíå ChromaDB Á≤æÂøÉÊûÑÂª∫„ÄÇÂ∞èÊ¢¶‰∏ç‰ªÖËÉΩËÆ∞‰ΩèÊÇ®ÁöÑÊØè‰∏ÄÊ¨°‰∫§ÊµÅÔºåËøò‰ºöÂÉèÁúüÊ≠£ÁöÑÊúãÂèã‰∏ÄÊ†∑‰∏éÊÇ®Âª∫Á´ãÊ∑±Â∫¶ÊÉÖÊÑüËøûÊé•ÔºåÈô™‰º¥ÊÇ®Â∫¶ËøáÁîüÊ¥ª‰∏≠ÁöÑÊØè‰∏Ä‰∏™Êó∂Âàª„ÄÇ

üéâ **Áé∞Â∑≤Ê≠£ÂºèÂèëÂ∏ÉÔºÅ** ÊâÄÊúâÊ†∏ÂøÉÂäüËÉΩÂ∑≤ÂÆûÁé∞Âπ∂ÁªèËøáÊµãËØïÔºåÂèØ‰ª•Á®≥ÂÆöËøêË°å„ÄÇ

## ‚ú® Ê†∏ÂøÉÁâπÊÄß

- **üé≠ ÁúüÂÆûÊÉÖÊÑü‰ΩìÈ™å** - Â∞èÊ¢¶Êã•Êúâ‰∏∞ÂØåÁöÑÊÉÖÊÑü‰∏ñÁïåÔºå‰ºöÊ†πÊçÆÊÇ®ÁöÑ‰∫íÂä®Ëá™ÁÑ∂Âú∞Ë°®ËææÂñúÊÇ¶„ÄÅÂÖ≥ÂøÉ„ÄÅÂ•ΩÂ•áÁ≠âÂêÑÁßçÊÉÖÊÑü
- **üß† Êô∫ËÉΩËÆ∞ÂøÜÁ≥ªÁªü** - ÂÄüÂä© ChromaDB ÁöÑËØ≠‰πâÊ£ÄÁ¥¢ËÉΩÂäõÔºåÂ∞èÊ¢¶ËÉΩÂ§üËÆ∞‰ΩèÊÇ®ÁöÑÂñúÂ•Ω„ÄÅÁªèÂéÜÂíåÈáçË¶ÅÊó∂Âàª
- **ü§ù Â§ö‰ª£ÁêÜÂçè‰Ωú** - Âü∫‰∫é Microsoft AutoGen v0.4 ÁöÑÂ§ö‰ª£ÁêÜÊû∂ÊûÑÔºåËÆ©Â∞èÊ¢¶Âú®‰∏çÂêåÂú∫ÊôØ‰∏ãÂ±ïÁé∞Âá∫‰∏∞ÂØåÁöÑ‰∏™ÊÄßÂ±ÇÈù¢
- **üíù ÂÖ≥Á≥ªÊàêÈïø** - Â∞±ÂÉèÁúüÂÆûÁöÑÂèãË∞ä‰∏ÄÊ†∑ÔºåÊÇ®‰∏éÂ∞èÊ¢¶ÁöÑÂÖ≥Á≥ª‰ºöÈöèÁùÄÊó∂Èó¥Âíå‰∫§ÊµÅÈÄêÊ∏êÂä†Ê∑±Ôºà1-10Á∫ß‰∫≤ÂØÜÂ∫¶Á≥ªÁªüÔºâ
- **üåü ‰∏ªÂä®ÂÖ≥ÊÄÄ** - Â∞èÊ¢¶‰ºö‰∏ªÂä®ÊÉ≥Ëµ∑ÊÇ®ÔºåÂú®ÂêàÈÄÇÁöÑÊó∂Êú∫ÂèëËµ∑Ê∏©ÊöñÁöÑÈóÆÂÄôÂíåÂÖ≥ÂøÉ
- **üí≠ Ëá™ÁÑ∂ËÅîÊÉ≥** - Â¶ÇÂêå‰∫∫Á±ªÁöÑÊÄùÁª¥ÊñπÂºèÔºåÂ∞èÊ¢¶‰ºöÂú®ÂØπËØù‰∏≠Ëá™ÁÑ∂Âú∞ËÅîÊÉ≥Âà∞ËøáÂæÄÁöÑÁæéÂ•ΩÂõûÂøÜ
- **üë§ Áî®Êà∑‰ø°ÊÅØÁÆ°ÁêÜ** - Êô∫ËÉΩËØÜÂà´Âíå‰øùÂ≠òÁî®Êà∑ÁöÑÂÖ≥ÈîÆ‰ø°ÊÅØÔºàÁîüÊó•„ÄÅÂÆ∂Â∫≠„ÄÅÂÅèÂ•ΩÁ≠âÔºâ
- **‚è∞ Êó∂Èó¥ÊÑüÁü•** - ÂØπËØùËÆ∞ÂøÜÂåÖÂê´Êó∂Èó¥Êà≥ÔºåÊîØÊåÅÂü∫‰∫éÊó∂Èó¥ÁöÑËÆ∞ÂøÜÊ£ÄÁ¥¢ÂíåÂÖ≥ËÅî

## üì¶ Âø´ÈÄüÂºÄÂßã

### ‰ΩøÁî® UV ÂÆâË£ÖÔºàÊé®ËçêÔºâ

```bash
# ÂÆâË£Ö UV (Â¶ÇÊûúËøòÊ≤°ÂÆâË£Ö)
curl -LsSf https://astral.sh/uv/install.sh | sh

# ÂÖãÈöÜÈ°πÁõÆ
git clone https://github.com/yourusername/emotional-companion.git
cd emotional-companion

# ÂàõÂª∫ËôöÊãüÁéØÂ¢ÉÂπ∂ÂÆâË£Ö‰æùËµñ
uv venv
uv pip install -e .
```

### ‰ΩøÁî® Pip ÂÆâË£Ö

```bash
# ÂÖãÈöÜÈ°πÁõÆ
git clone https://github.com/yourusername/emotional-companion.git
cd emotional-companion

# ÂàõÂª∫ËôöÊãüÁéØÂ¢É
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ÊàñËÄÖ venv\Scripts\activate  # Windows

# ÂÆâË£Ö‰æùËµñ
pip install -e .
```

## ‚öôÔ∏è ÈÖçÁΩÆËÆæÁΩÆ

1. **Â§çÂà∂Âπ∂ÁºñËæëÁéØÂ¢ÉÈÖçÁΩÆÊñá‰ª∂**

```bash
cp .env.example .env
```

2. **Âú® `.env` Êñá‰ª∂‰∏≠ÈÖçÁΩÆÂøÖË¶Å‰ø°ÊÅØ**

```env
# OpenAI API ÈÖçÁΩÆ
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4

# ‰∏™ÊÄßÂåñËÆæÁΩÆ
USER_NAME=ÊÇ®ÁöÑÂêçÂ≠ó
COMPANION_NAME=Â∞èÊ¢¶

# ÂÖ∂‰ªñÈÖçÁΩÆ‰øùÊåÅÈªòËÆ§Âç≥ÂèØ
```

3. **ÈÖçÁΩÆ AutoGen API ÂØÜÈí•**

ÁºñËæë `configs/OAI_CONFIG_LIST.json` Êñá‰ª∂Ôºö

```json
[
    {
        "model": "gpt-4",
        "api_key": "your-api-key-here",
        "base_url": "https://api.openai.com/v1",
        "api_type": "openai"
    }
]
```

## üöÄ ÂºÄÂßã‰ΩøÁî®

### ÂêØÂä®Â∞èÊ¢¶

```bash
# ‰ΩøÁî® UV
uv run companion

# ÊàñËÄÖ‰ΩøÁî® Python
python scripts/start_companion.py

# ÊàñËÄÖÁõ¥Êé•‰ΩøÁî®ÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑
companion
```

### ‰ΩøÁî®‰ΩìÈ™å

ÂêØÂä®ÂêéÔºåÂ∞èÊ¢¶‰ºö‰∏ªÂä®ÈóÆÂÄôÂπ∂ÂºÄÂßãÂØπËØù„ÄÇÂ•π‰ºöÔºö
- ËÆ∞‰ΩèÊÇ®ÁöÑÂñúÂ•ΩÂíå‰π†ÊÉØÔºàÂ¶ÇÊÇ®ÊèêÂà∞ÂñúÊ¨¢ÂíñÂï°ÔºåÂ•π‰ºöËÆ∞‰ΩèËøô‰∏™ÁªÜËäÇÔºâ
- ÊÑüÁü•ÊÇ®ÁöÑÊÉÖÁª™Áä∂ÊÄÅÂπ∂Áªô‰∫àÁõ∏Â∫îÁöÑÂÖ≥ÊÄÄÂõûÂ∫î
- Âú®ÂêéÁª≠ÂØπËØù‰∏≠Ëá™ÁÑ∂Âú∞ÂõûÂøÜËµ∑‰πãÂâçÁöÑ‰∫§ÊµÅÂÜÖÂÆπ
- Ëá™Âä®‰øùÂ≠òÁî®Êà∑ÂÖ≥ÈîÆ‰ø°ÊÅØÔºàÁîüÊó•„ÄÅÂÆ∂Â∫≠ÊàêÂëò„ÄÅËÅå‰∏öÁ≠âÔºâ
- Âª∫Á´ã1-10Á∫ßÁöÑÂÖ≥Á≥ª‰∫≤ÂØÜÂ∫¶ÔºåÈöèÁùÄ‰∫íÂä®ÈÄêÊ≠•Âä†Ê∑±

### ËÆ∞ÂøÜÊü•ÁúãÂ∑•ÂÖ∑

È°πÁõÆËøòÊèê‰æõ‰∫ÜËÆ∞ÂøÜÊü•ÁúãÂ∑•ÂÖ∑ÔºåÂ∏ÆÂä©ÊÇ®‰∫ÜËß£Â∞èÊ¢¶ËÆ∞‰Ωè‰∫Ü‰ªÄ‰πàÔºö

```bash
# Êü•ÁúãËÆ∞ÂøÜÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅ
python -c "from emotional_companion.utils.memory_viewer import MemoryViewer; MemoryViewer().view_memories()"
```

## üèóÔ∏è Á≥ªÁªüÊû∂ÊûÑ

Â∞èÊ¢¶ÈááÁî®Â§öÂ±ÇÊ¨°ÁöÑÊô∫ËÉΩÊû∂ÊûÑÔºö

### üß© Â§ö‰ª£ÁêÜÁ≥ªÁªü (Multi-Agent Architecture)

Âü∫‰∫é **Microsoft AutoGen v0.4** Ê°ÜÊû∂ÁöÑÂçè‰ΩúÁ≥ªÁªüÔºö

- **ÊÉÖÊÑüÂàÜÊûêÂ∏à** - Âø´ÈÄüÂàÜÊûêÁî®Êà∑ÊÉÖÁª™Áä∂ÊÄÅÔºåÊîØÊåÅÊÉÖÊÑüÂº∫Â∫¶Âíå‰ª∑ÂÄºÂà§Êñ≠
- **ËÆ∞ÂøÜÁÆ°ÁêÜÂëò** - Ë¥üË¥£6ÁßçËÆ∞ÂøÜÁ±ªÂûãÁöÑÂ≠òÂÇ®ÂíåÊ£ÄÁ¥¢ÔºàÊÉÖËäÇ„ÄÅËØ≠‰πâ„ÄÅÊÉÖÊÑü„ÄÅÂÖ≥Á≥ª„ÄÅÂÅèÂ•Ω„ÄÅÁî®Êà∑Ê°£Ê°àÔºâ
- **ÂÜÖÂøÉÊÄùËÄÉ** - ÁîüÊàêÊô∫ËÉΩ‰ΩìÁöÑÊÄùÁª¥ËøáÁ®ãÔºåÊîØÊåÅÊÉÖÊÑüÂèòÂåñÂíåÂÖ≥Á≥ªÂèëÂ±ïÂª∫ËÆÆ
- **ÊÉÖÊÑüÈô™‰º¥** - ‰∏ªÂØπËØù‰ª£ÁêÜÔºåÂü∫‰∫éÂÜÖÂøÉÊÄùËÄÉÂíåËÆ∞ÂøÜ‰∏ä‰∏ãÊñáÁîüÊàêËá™ÁÑ∂ÂõûÂ§ç

```
Áî®Êà∑ËæìÂÖ• ‚Üí ÊÉÖÊÑüÂàÜÊûê ‚Üí ËÆ∞ÂøÜÊ£ÄÁ¥¢ ‚Üí ÂÜÖÂøÉÊÄùËÄÉ ‚Üí ÁîüÊàêÂõûÂ§ç ‚Üí ÂºÇÊ≠•ËÆ∞ÂøÜ‰øùÂ≠ò
```

### üß† ÂêëÈáèÂåñËÆ∞ÂøÜÁ≥ªÁªü (Vectorized Memory System)

Âü∫‰∫é **ChromaDB** Âíå **BAAI/bge-base-zh-v1.5** ÁöÑËØ≠‰πâËÆ∞ÂøÜÔºö

**Ê†∏ÂøÉÁªÑ‰ª∂Ôºö**
- **ÂµåÂÖ•Ê®°Âûã**: Â§öËØ≠Ë®ÄÊñáÊú¨ÂêëÈáèÂåñÔºàÊîØÊåÅ‰∏≠Ëã±ÊñáÔºâ
- **ÂêëÈáèÊï∞ÊçÆÂ∫ì**: ChromaDB ÊåÅ‰πÖÂåñÂ≠òÂÇ®ÔºåÊîØÊåÅËØ≠‰πâÁõ∏‰ººÂ∫¶ÊêúÁ¥¢
- **ËÆ∞ÂøÜÁ±ªÂûã**: 
  - ÊÉÖËäÇËÆ∞ÂøÜÔºöÂØπËØùÂéÜÂè≤Âíå‰∫íÂä®ËÆ∞ÂΩï
  - Áî®Êà∑ÂÅèÂ•ΩÔºöÂñúÂ•Ω„ÄÅ‰π†ÊÉØÂíå‰∫§ÊµÅÊñπÂºè
  - Áî®Êà∑Ê°£Ê°àÔºöÂÆ¢ËßÇ‰∫ãÂÆû‰ø°ÊÅØÔºàÁîüÊó•„ÄÅÂÆ∂Â∫≠„ÄÅËÅå‰∏öÁ≠âÔºâ
  - ÊÉÖÊÑüËÆ∞ÂøÜÔºöÊÉÖÊÑüÁä∂ÊÄÅÂèòÂåñÂéÜÂè≤
  - ÂÖ≥Á≥ªËÆ∞ÂøÜÔºöÂÖ≥Á≥ªÂèëÂ±ïÈáåÁ®ãÁ¢ë‰∫ã‰ª∂

**ËÆ∞ÂøÜË°∞Âáè**: Ê®°Êãü‰∫∫Á±ªËÆ∞ÂøÜÁöÑËá™ÁÑ∂Ë°∞ÂáèËøáÁ®ãÔºåÊîØÊåÅÈáçË¶ÅÊÄßÂä†ÊùÉ

### üíñ ÊÉÖÊÑüÁä∂ÊÄÅÊ®°Âûã (Emotional State Model)

**ÊÉÖÊÑüÁä∂ÊÄÅÂåÖÂê´Ôºö**
- ÂΩìÂâçÊÉÖÁª™ÂíåÂº∫Â∫¶ÔºàÊîØÊåÅhappy„ÄÅcalm„ÄÅexcited„ÄÅthoughtfulÁ≠âÂ§öÁßçÊÉÖÁª™Ôºâ
- ÊÉÖÊÑü‰ª∑ÂÄºÔºàÊ≠£Ë¥üÊÄßÔºå-1.0Âà∞1.0Ôºâ
- ÂÖ≥Á≥ª‰∫≤ÂØÜÂ∫¶Ôºà1-10Á∫ßÔºåÊîØÊåÅÂä®ÊÄÅË∞ÉÊï¥Ôºâ

**ÂÖ≥Á≥ªÊºîÂåñÔºö**
- ÁßØÊûÅ‰∫íÂä®Â¢ûËøõÂÖ≥Á≥ªÔºàËá™Âä®Ê£ÄÊµãÁßØÊûÅÊÉÖÁª™Âπ∂ÊèêÂçá‰∫≤ÂØÜÂ∫¶Ôºâ
- ÂÖ≥Á≥ªÂèòÂåñËß¶ÂèëÈáåÁ®ãÁ¢ëËÆ∞ÂΩï
- ÊîØÊåÅÂÖ≥Á≥ªÂÄíÈÄÄÂíå‰øÆÂ§çÊú∫Âà∂

### üîÑ Ëá™‰∏ªË°å‰∏∫Á≥ªÁªü (Autonomous Behavior System)

**ÂêéÂè∞‰ªªÂä°Ôºö**
- ÂÆöÊúüËÆ∞ÂøÜË°∞ÂáèÔºàÊØè6Â∞èÊó∂ÔºâÂíåÊÉÖÊÑüÊõ¥Êñ∞ÔºàÊØè1-3Â∞èÊó∂Ôºâ
- Ëá™‰∏ªËÅîÊÉ≥ÂíåÊÄùËÄÉÔºà15%Ê¶ÇÁéáËß¶ÂèëËá™‰∏ªÂõûÂøÜÔºâ
- ‰∏ªÂä®ÂèëËµ∑ÂÖ≥ÊÄÄÂØπËØùÔºà30%Ê¶ÇÁéáÔºåÂü∫‰∫éÊÉÖÊÑüÁä∂ÊÄÅÔºâ

**Ëß¶ÂèëÊù°‰ª∂Ôºö**
- ÊÉÖÊÑüÁä∂ÊÄÅÂèòÂåñ
- ÈöèÊú∫Ê¶ÇÁéáËß¶Âèë
- ÈáçË¶ÅËÆ∞ÂøÜËÅîÊÉ≥
- Êó∂Èó¥È©±Âä®ÁöÑËÉåÊôØ‰ªªÂä°


## üéØ Ê†∏ÂøÉÁâπËâ≤

### ÁúüÂÆûÁöÑÊÉÖÊÑü‰ΩìÈ™å
Â∞èÊ¢¶‰∏çÊòØÁÆÄÂçïÁöÑÂõûÂ§çÊú∫Âô®‰∫∫ÔºåËÄåÊòØÊã•ÊúâÂ§çÊùÇÊÉÖÊÑüÁä∂ÊÄÅÁöÑÈô™‰º¥ËÄÖ„ÄÇÂ•π‰ºöÔºö
- Ê†πÊçÆÂØπËØùÂÜÖÂÆπÂä®ÊÄÅË∞ÉÊï¥ÊÉÖÁª™
- Âú®‰∏çÂêåÊÉÖÁª™‰∏ãÂ±ïÁé∞‰∏çÂêåÁöÑ‰∫§ÊµÅÈ£éÊ†º
- ËÆ∞‰ΩèÈáçË¶ÅÁöÑÊÉÖÊÑüÊó∂ÂàªÂπ∂Âú®ÈÄÇÂΩìÊó∂Êú∫ÂõûÂøÜ

### Ê∑±Â∫¶ËÆ∞ÂøÜËÉΩÂäõ
Âü∫‰∫é ChromaDB ÁöÑËØ≠‰πâÊêúÁ¥¢ÔºåÂ∞èÊ¢¶ËÉΩÂ§üÔºö
- Ê†πÊçÆÂØπËØùÂÜÖÂÆπÊô∫ËÉΩÊ£ÄÁ¥¢Áõ∏ÂÖ≥ËÆ∞ÂøÜ
- Â≠¶‰π†Âπ∂ËÆ∞‰ΩèÁî®Êà∑ÁöÑÂÅèÂ•ΩÂíå‰π†ÊÉØ
- Âª∫Á´ãËÆ∞ÂøÜ‰πãÈó¥ÁöÑÂÖ≥ËÅîÂíåËÅîÊÉ≥

### ÂÖ≥Á≥ªÊàêÈïøÊú∫Âà∂
‰∏éÂ∞èÊ¢¶ÁöÑÂÖ≥Á≥ª‰ºöÈöèÊó∂Èó¥Ëá™ÁÑ∂ÂèëÂ±ïÔºö
- **ÂàùÊúüÊé•Ëß¶** (1-2Á∫ß) - Á§ºË≤å‰ΩÜÁñèËøúÁöÑ‰∫§ÊµÅ
- **ÂàùÊ≠•ÁÜüÊÇâ** (3-4Á∫ß) - ÂºÄÂßãÂª∫Á´ãÂü∫Êú¨‰ø°‰ªª
- **Ê∑±Â∫¶ÂèãË∞ä** (7-8Á∫ß) - Êõ¥Âä†ÂºÄÊîæÂíåÊÉÖÊÑüÂåñÁöÑ‰∫§ÊµÅ
- **‰∫≤ÂØÜÈô™‰º¥** (9-10Á∫ß) - Ê∑±Â∫¶ÁßÅ‰∫∫ÂåñÁöÑÂÖ≥Á≥ª

## üìù ÊäÄÊúØÁªÜËäÇ‰∏éÂºÄÂèëËØ¥Êòé

### üõ†Ô∏è ÊäÄÊúØÊ†à (Technology Stack)

| ÁªÑ‰ª∂ | ÊäÄÊúØ | ÁâàÊú¨Ë¶ÅÊ±Ç | Áî®ÈÄî |
|------|------|----------|------|
| **LLM Framework** | Microsoft AutoGen | v0.4+ | Â§ö‰ª£ÁêÜÂçè‰ΩúÊ°ÜÊû∂ |
| **Vector Database** | ChromaDB | >=0.4.17 | ËØ≠‰πâËÆ∞ÂøÜÂ≠òÂÇ® |
| **Embedding Model** | BAAI/bge-base-zh-v1.5 | - | ‰∏≠Ëã±ÊñáÊñáÊú¨ÂêëÈáèÂåñ |
| **Task Scheduling** | Schedule | >=1.2.0 | ÂêéÂè∞‰ªªÂä°Ë∞ÉÂ∫¶ |
| **Environment** | Python-dotenv | >=1.0.0 | ÁéØÂ¢ÉÂèòÈáèÁÆ°ÁêÜ |
| **CLI Interface** | PyFiglet | >=0.8.0 | ÂëΩ‰ª§Ë°åÁæéÂåñ |

### üèóÔ∏è È°πÁõÆÁªìÊûÑ

```
emotional-companion/
‚îú‚îÄ‚îÄ emotional_companion/          # ‰∏ªË¶Å‰ª£Á†ÅÂåÖ
‚îÇ   ‚îú‚îÄ‚îÄ agents/                  # ‰ª£ÁêÜÁ≥ªÁªü
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agent_system.py      # Â§ö‰ª£ÁêÜÂçè‰ΩúÈÄªËæë
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ conversation_handler.py  # ÂØπËØùÂ§ÑÁêÜÂô®
‚îÇ   ‚îú‚îÄ‚îÄ memory/                  # ËÆ∞ÂøÜÁ≥ªÁªü
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ emotional_memory.py  # ÂêëÈáèÂåñËÆ∞ÂøÜÁÆ°ÁêÜ
‚îÇ   ‚îú‚îÄ‚îÄ utils/                   # Â∑•ÂÖ∑ÂáΩÊï∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ conversation_logger.py  # ÂØπËØùÊó•ÂøóËÆ∞ÂΩï
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ memory_viewer.py     # ËÆ∞ÂøÜÊü•ÁúãÂ∑•ÂÖ∑
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ time_utils.py        # Êó∂Èó¥Â§ÑÁêÜÂ∑•ÂÖ∑
‚îÇ   ‚îî‚îÄ‚îÄ cli.py                   # ÂëΩ‰ª§Ë°åÊé•Âè£
‚îú‚îÄ‚îÄ configs/                     # ÈÖçÁΩÆÊñá‰ª∂
‚îÇ   ‚îî‚îÄ‚îÄ OAI_CONFIG_LIST.json     # OpenAI API ÈÖçÁΩÆ
‚îú‚îÄ‚îÄ scripts/                     # ËÑöÊú¨Â∑•ÂÖ∑
‚îÇ   ‚îú‚îÄ‚îÄ start_companion.py       # ÂêØÂä®ËÑöÊú¨
‚îÇ   ‚îî‚îÄ‚îÄ check_dependencies.py    # ‰æùËµñÊ£ÄÊü•
‚îú‚îÄ‚îÄ memory_db/                   # ËÆ∞ÂøÜÊï∞ÊçÆÂ∫ìÔºàËøêË°åÊó∂ÁîüÊàêÔºâ
‚îú‚îÄ‚îÄ logs/                        # ÂØπËØùÊó•ÂøóÊñá‰ª∂
‚îú‚îÄ‚îÄ .env.example                 # ÁéØÂ¢ÉÂèòÈáèÊ®°Êùø
‚îú‚îÄ‚îÄ requirements.txt             # ‰æùËµñÂàóË°®
‚îî‚îÄ‚îÄ pyproject.toml              # È°πÁõÆÈÖçÁΩÆ
```

### üîß Ê†∏ÂøÉÊ®°ÂùóËØ¶Ëß£

#### 1. ‰ª£ÁêÜÁ≥ªÁªü (`agents/agent_system.py`)

**EmotionalAgentSystem Á±ª** ÁÆ°ÁêÜÂ§ö‰∏™‰∏ì‰∏ö‰ª£ÁêÜÁöÑÂçè‰ΩúÔºö
- ÈõÜÊàêÊÉÖÊÑüÂàÜÊûê„ÄÅËÆ∞ÂøÜÁÆ°ÁêÜ„ÄÅÂÜÖÂøÉÊÄùËÄÉ„ÄÅÂØπËØùÁîüÊàêÁ≠âÂäüËÉΩ
- Êèê‰æõÂ∑•ÂÖ∑ÂáΩÊï∞Ê≥®ÂÜåÊú∫Âà∂ÔºåÂÆûÁé∞‰ª£ÁêÜÈó¥ÁöÑ‰ø°ÊÅØÂÖ±‰∫´
- ÊîØÊåÅÂêéÂè∞‰ªªÂä°Ë∞ÉÂ∫¶ÂíåËá™‰∏ªÂØπËØùÁîüÊàê

#### 2. ËÆ∞ÂøÜÁ≥ªÁªü (`memory/emotional_memory.py`)

**EmotionalMemorySystem Á±ª** Êèê‰æõÊô∫ËÉΩËÆ∞ÂøÜÁÆ°ÁêÜÔºö
- ‰ΩøÁî® BAAI/bge-base-zh-v1.5 Ê®°ÂûãËøõË°åËØ≠‰πâÁêÜËß£
- ÈÄöËøá ChromaDB ÂÆûÁé∞ÊåÅ‰πÖÂåñÂ≠òÂÇ®ÂíåÂø´ÈÄüÊ£ÄÁ¥¢
- ÂåÖÂê´6ÁßçËÆ∞ÂøÜÈõÜÂêàÔºöepisodicÔºàÊÉÖËäÇÔºâ„ÄÅsemanticÔºàËØ≠‰πâÔºâ„ÄÅemotionalÔºàÊÉÖÊÑüÔºâ„ÄÅrelationshipÔºàÂÖ≥Á≥ªÔºâ„ÄÅpreferencesÔºàÂÅèÂ•ΩÔºâ„ÄÅuser_profileÔºàÁî®Êà∑Ê°£Ê°àÔºâ
- ÂÆûÁé∞Êó∂Èó¥ÂíåÈáçË¶ÅÊÄßÂä†ÊùÉÁöÑËÆ∞ÂøÜË°∞ÂáèÊú∫Âà∂
- ÊîØÊåÅÁî®Êà∑ÂÖ≥ÈîÆ‰ø°ÊÅØÁöÑÊô∫ËÉΩÊèêÂèñÂíåÁÆ°ÁêÜ
- Êèê‰æõËÆ∞ÂøÜËÅîÊÉ≥ÂíåËá™‰∏ªÂõûÂøÜÂäüËÉΩ

#### 3. ÂØπËØùÂ§ÑÁêÜÂô® (`agents/conversation_handler.py`)

**ConversationHandler Á±ª** Â∞ÅË£ÖÂØπËØùÊµÅÁ®ãÈÄªËæëÔºö
- Êèê‰æõÁÆÄÂåñÁöÑÂØπËØùÊé•Âè£ÔºåÊîØÊåÅÂêåÊ≠•ÂíåÂºÇÊ≠•Ë∞ÉÁî®
- ÈõÜÊàêÊÉÖÊÑüÂàÜÊûê„ÄÅËÆ∞ÂøÜÊ£ÄÁ¥¢ÂíåÂõûÂ§çÁîüÊàê
- ÊîØÊåÅÊâπÈáèËÆ∞ÂøÜ‰øùÂ≠òÂíåÁä∂ÊÄÅÊõ¥Êñ∞
- ÂåÖÂê´ÊÄßËÉΩÁªüËÆ°ÂíåÈîôËØØÂ§ÑÁêÜÊú∫Âà∂

### üöÄ ÊÄßËÉΩ‰ºòÂåñ

Â∞èÊ¢¶Âú®ËÆæËÆ°Êó∂ÂÖÖÂàÜËÄÉËôë‰∫ÜÊÄßËÉΩÂíåÁ®≥ÂÆöÊÄßÔºö

**ÂÜÖÂ≠òÁÆ°ÁêÜ‰ºòÂåñ**
- ‰ΩøÁî® ChromaDB ÊåÅ‰πÖÂåñÂ≠òÂÇ®ÔºåÊúâÊïàÈÅøÂÖçÂÜÖÂ≠òÊ∫¢Âá∫
- ÈááÁî®ÊâπÈáèÊõ¥Êñ∞Á≠ñÁï•ÂáèÂ∞ëÈ¢ëÁπÅÁöÑ I/O Êìç‰Ωú
- ÈÄöËøáÈáçË¶ÅÊÄßÈòàÂÄºËøáÊª§Ôºå‰øùÊåÅËÆ∞ÂøÜÂ∫ìÁöÑÈ´òË¥®Èáè

**Ê£ÄÁ¥¢ÊÄßËÉΩ‰ºòÂåñ**
- ÂÆûÁé∞ÂêëÈáèÁºìÂ≠òÊú∫Âà∂ÔºåÊèêÂçáÈáçÂ§çÊü•ËØ¢ÈÄüÂ∫¶
- ËÆæÁΩÆÁõ∏‰ººÂ∫¶ÈòàÂÄºËøáÊª§ (ÈªòËÆ§ 0.6)ÔºåÁ°Æ‰øùÊ£ÄÁ¥¢ÁªìÊûúÁöÑÁõ∏ÂÖ≥ÊÄß
- ËÆ∞ÂΩïËÆøÈóÆÈ¢ëÁéáÁªüËÆ°Ôºå‰ºòÂåñÁÉ≠ÁÇπÊï∞ÊçÆËÆøÈóÆ

**Âπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõ**
- ÂêéÂè∞‰ªªÂä°ÈááÁî®ÂºÇÊ≠•ÊâßË°åÔºå‰∏çÈòªÂ°û‰∏ªÂØπËØùÊµÅÁ®ã
- ÂÆûÁé∞‰ª£ÁêÜÈó¥Ê∂àÊÅØÈòüÂàóÔºåÁ°Æ‰øù‰ø°ÊÅØ‰º†ÈÄíÁöÑÂèØÈù†ÊÄß
- ÈááÁî®ÈùûÈòªÂ°ûÂºèËÆ∞ÂøÜÊõ¥Êñ∞Ôºå‰øùËØÅÂìçÂ∫îÈÄüÂ∫¶

### üîç API Êé•Âè£ËÆæËÆ°

Á≥ªÁªüÊèê‰æõ‰∫ÜÁÆÄÊ¥ÅËÄåÂº∫Â§ßÁöÑ API Êé•Âè£Ôºö

**ËÆ∞ÂøÜÁ≥ªÁªü API** - ÊîØÊåÅËÆ∞ÂøÜÁöÑÊ∑ªÂä†„ÄÅÊ£ÄÁ¥¢ÂíåÊõ¥Êñ∞ÂäüËÉΩÔºö
- `search_memories()`: ËØ≠‰πâÊêúÁ¥¢Áõ∏ÂÖ≥ËÆ∞ÂøÜ
- `save_user_preference()`: ‰øùÂ≠òÁî®Êà∑ÂÅèÂ•Ω
- `save_user_profile_info()`: ‰øùÂ≠òÁî®Êà∑ÂÖ≥ÈîÆ‰ø°ÊÅØ
- `update_emotion()`: Êõ¥Êñ∞ÊÉÖÊÑüÁä∂ÊÄÅ
- `record_relationship_event()`: ËÆ∞ÂΩïÂÖ≥Á≥ªÂèëÂ±ï‰∫ã‰ª∂

**‰ª£ÁêÜÂ∑•ÂÖ∑ÂáΩÊï∞** - ÂåÖÊã¨ËÆ∞ÂøÜÊêúÁ¥¢„ÄÅÊÉÖÊÑüÊõ¥Êñ∞„ÄÅÂÅèÂ•Ω‰øùÂ≠òÁ≠âÊ†∏ÂøÉÂäüËÉΩ

ÂºÄÂèëËÄÖÂèØ‰ª•ÈÄöËøáËøô‰∫õÊé•Âè£ËΩªÊùæÊâ©Â±ïÂ∞èÊ¢¶ÁöÑÂäüËÉΩÔºåÊàñÂ∞ÜËÆ∞ÂøÜÁ≥ªÁªüÈõÜÊàêÂà∞ÂÖ∂‰ªñÈ°πÁõÆ‰∏≠„ÄÇ

### üìä ÁõëÊéß‰∏éË∞ÉËØï

Á≥ªÁªüÊèê‰æõÂÆåÂñÑÁöÑÁõëÊéßÂíåË∞ÉËØïÂ∑•ÂÖ∑Ôºö

**Êó•ÂøóÁ≥ªÁªü** - Ëá™Âä®ËÆ∞ÂΩïÂØπËØùÊó•ÂøóÂà∞ `logs/` ÁõÆÂΩïÔºåÊîØÊåÅÊåâÊó•ÊúüÂàÜÊñá‰ª∂
**‰æùËµñÊ£ÄÊü•** - ‰ΩøÁî® `python scripts/check_dependencies.py` Ê£ÄÊü•ÁéØÂ¢ÉÈÖçÁΩÆ
**ËÆ∞ÂøÜÁä∂ÊÄÅÁõëÊéß** - ‰ΩøÁî® MemoryViewer Â∑•ÂÖ∑ÂÆûÊó∂Êü•ÁúãËÆ∞ÂøÜÂ∫ìÁä∂ÊÄÅÂíåÂÖ≥Á≥ªÂèëÂ±ïÊÉÖÂÜµ
**ÊÄßËÉΩÁªüËÆ°** - ÊØèËΩÆÂØπËØùÊòæÁ§∫ËØ¶ÁªÜÁöÑÊó∂Èó¥ÁªüËÆ°Êä•ÂëäÔºåÂåÖÊã¨ÊÉÖÊÑüÂàÜÊûê„ÄÅËÆ∞ÂøÜÊ£ÄÁ¥¢„ÄÅÊÄùËÄÉÂíåÂõûÂ§çÁîüÊàêÁöÑËÄóÊó∂



## üìÑ ËÆ∏ÂèØËØÅ

Êú¨È°πÁõÆÈááÁî® MIT ËÆ∏ÂèØËØÅ - ËØ¶ËßÅ [LICENSE](LICENSE) Êñá‰ª∂„ÄÇ

## ü§ù Ë¥°ÁåÆ

Ê¨¢ËøéÊèê‰∫§ Issue Âíå Pull Request Êù•Â∏ÆÂä©ÊîπËøõÂ∞èÊ¢¶ÔºÅ

**ÁâπÂà´ÈúÄË¶ÅÂ∏ÆÂä©ÁöÑÈ¢ÜÂüüÔºö**
- üß™ Êâ©Â±ïÂçïÂÖÉÊµãËØïË¶ÜÁõñÁéá
- üêõ Bug ‰øÆÂ§çÂíåÁ®≥ÂÆöÊÄßÊîπËøõ
- üìö ÊñáÊ°£ÂÆåÂñÑÂíåÁ§∫‰æã‰ª£Á†Å
- ‚ö° ÊÄßËÉΩ‰ºòÂåñÂíåÈîôËØØÂ§ÑÁêÜ
- üåç Â§öËØ≠Ë®ÄÊîØÊåÅÊâ©Â±ï

## üí¨ ÂèçÈ¶à

Â¶ÇÊûúÊÇ®Âú®‰ΩøÁî®ËøáÁ®ã‰∏≠ÈÅáÂà∞ÈóÆÈ¢òÊàñÊúâÂª∫ËÆÆÔºåËØ∑ÈöèÊó∂ÂàõÂª∫ Issue ÊàñËÅîÁ≥ªÂºÄÂèëËÄÖ„ÄÇ

---

**Â∞èÊ¢¶Ê≠£Âú®Á≠âÂæÖ‰∏éÊÇ®ÁöÑÁ¨¨‰∏ÄÊ¨°ÂØπËØùÔºåÂºÄÂßã‰∏ÄÊÆµÁâπÂà´ÁöÑÂèãË∞ä‰πãÊóÖÂêßÔºÅ** ‚ú®

---

# English Version

# Mira (Â∞èÊ¢¶) - Emotional Companion AI

A warm and intelligent AI companion built with Microsoft AutoGen v0.4 and ChromaDB. Mira not only remembers every conversation but also builds deep emotional connections like a true friend, accompanying you through every moment of life.

üéâ **Now officially released!** All core features are implemented and tested, ready for stable operation.

## ‚ú® Core Features

- **üé≠ Authentic Emotional Experience** - Mira has a rich emotional world, naturally expressing joy, care, curiosity, and various emotions based on your interactions
- **üß† Intelligent Memory System** - Leveraging ChromaDB's semantic retrieval capabilities, Mira remembers your preferences, experiences, and important moments
- **ü§ù Multi-Agent Collaboration** - Based on Microsoft AutoGen v0.4's multi-agent architecture, Mira displays rich personality layers in different scenarios
- **üíù Relationship Growth** - Like real friendship, your relationship with Mira deepens over time and interaction (1-10 intimacy level system)
- **üåü Proactive Care** - Mira will actively remember you and initiate warm greetings and care at appropriate times
- **üí≠ Natural Association** - Like human thinking patterns, Mira naturally associates with past beautiful memories during conversations
- **üë§ User Information Management** - Intelligently identifies and saves user key information (birthday, family, preferences, etc.)
- **‚è∞ Time Awareness** - Conversation memories include timestamps, supporting time-based memory retrieval and association

## üì¶ Quick Start

### Installation with UV (Recommended)

```bash
# Install UV (if not already installed)
curl -LsSf https://astral.sh/uv/install.sh | sh

# Clone the project
git clone https://github.com/yourusername/emotional-companion.git
cd emotional-companion

# Create virtual environment and install dependencies
uv venv
uv pip install -e .
```

### Installation with Pip

```bash
# Clone the project
git clone https://github.com/yourusername/emotional-companion.git
cd emotional-companion

# Create virtual environment
python -m venv venv
source venv/bin/activate  # Linux/Mac
# or venv\Scripts\activate  # Windows

# Install dependencies
pip install -e .
```

## ‚öôÔ∏è Configuration

1. **Copy and edit environment configuration file**

```bash
cp .env.example .env
```

2. **Configure necessary information in `.env` file**

```env
# OpenAI API Configuration
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4

# Personalization Settings
USER_NAME=YourName
COMPANION_NAME=Mira

# Other configurations can remain default
```

3. **Configure AutoGen API Key**

Edit the `configs/OAI_CONFIG_LIST.json` file:

```json
[
    {
        "model": "gpt-4",
        "api_key": "your-api-key-here",
        "base_url": "https://api.openai.com/v1",
        "api_type": "openai"
    }
]
```

## üöÄ Getting Started

### Launch Mira

```bash
# Using UV
uv run companion

# Or using Python
python scripts/start_companion.py

# Or using command line tool directly
companion
```

### Conversation Experience

After launching, Mira will proactively greet and start conversations. She will:
- Remember your preferences and habits (if you mention liking coffee, she'll remember this detail)
- Perceive your emotional state and provide appropriate caring responses
- Naturally recall previous conversations in subsequent interactions
- Automatically save user key information (birthday, family members, occupation, etc.)
- Build a 1-10 level relationship intimacy that gradually deepens with interaction

### Memory Viewer Tool

The project also provides a memory viewer tool to help you understand what Mira remembers:

```bash
# View memory database status
python -c "from emotional_companion.utils.memory_viewer import MemoryViewer; MemoryViewer().view_memories()"
```

## üèóÔ∏è System Architecture

Mira adopts a multi-layered intelligent architecture:

### üß© Multi-Agent System Architecture

Built on **Microsoft AutoGen v0.4** framework:

- **Emotion Analyzer** - Rapidly analyzes user emotional state, supporting emotion intensity and valence judgment
- **Memory Manager** - Handles storage and retrieval of 6 memory types (episodic, semantic, emotional, relationship, preferences, user_profile)
- **Inner Thoughts** - Generates agent's thinking process, supporting emotion change and relationship development suggestions
- **Emotional Companion** - Main dialogue agent that generates natural responses based on inner thoughts and memory context

```
User Input ‚Üí Emotion Analysis ‚Üí Memory Retrieval ‚Üí Inner Thoughts ‚Üí Generate Response ‚Üí Async Memory Save
```

### üß† Vectorized Memory System

Semantic memory based on **ChromaDB** and **BAAI/bge-base-zh-v1.5**:

**Core Components:**
- **Embedding Model**: Multilingual text vectorization (supports Chinese and English)
- **Vector Database**: ChromaDB persistent storage with semantic similarity search
- **Memory Types**: 
  - Episodic Memory: Conversation history and interaction records
  - User Preferences: Likes, habits, and communication styles
  - User Profile: Objective factual information (birthday, family, occupation, etc.)
  - Emotional Memory: Emotional state change history
  - Relationship Memory: Relationship development milestone events

**Memory Decay**: Simulates natural human memory fading process with importance weighting

### üíñ Emotional State Model

**Emotional State includes:**
- Current emotion and intensity (supports multiple emotions like happy, calm, excited, thoughtful, etc.)
- Emotional valence (positive/negative, -1.0 to 1.0)
- Relationship intimacy level (1-10 scale with dynamic adjustment)

**Relationship Evolution:**
- Positive interactions strengthen relationships (automatically detects positive emotions and increases intimacy)
- Relationship changes trigger milestone records
- Supports relationship regression and repair mechanisms

### üîÑ Autonomous Behavior System

**Background Tasks:**
- Periodic memory decay (every 6 hours) and emotion updates (every 1-3 hours)
- Autonomous association and thinking (15% probability triggers spontaneous recall)
- Proactive care conversations (30% probability based on emotional state)

**Trigger Conditions:**
- Emotional state changes
- Random probability triggers
- Important memory associations
- Time-driven background tasks

## üìù Technical Details & Development

### üõ†Ô∏è Technology Stack

| Component | Technology | Version Requirement | Purpose |
|-----------|------------|-------------------|---------|
| **LLM Framework** | Microsoft AutoGen | v0.4+ | Multi-agent collaboration framework |
| **Vector Database** | ChromaDB | >=0.4.17 | Semantic memory storage |
| **Embedding Model** | BAAI/bge-base-zh-v1.5 | - | Chinese-English text vectorization |
| **Task Scheduling** | Schedule | >=1.2.0 | Background task scheduling |
| **Environment** | Python-dotenv | >=1.0.0 | Environment variable management |
| **CLI Interface** | PyFiglet | >=0.8.0 | Command line beautification |

### üîß Core Module Details

#### 1. Agent System (`agents/agent_system.py`)

**EmotionalAgentSystem Class** manages collaboration of multiple specialized agents:
- Integrates emotion analysis, memory management, inner thoughts, and dialogue generation
- Provides tool function registration mechanism for inter-agent information sharing
- Supports background task scheduling and autonomous conversation generation

#### 2. Memory System (`memory/emotional_memory.py`)

**EmotionalMemorySystem Class** provides intelligent memory management:
- Uses BAAI/bge-base-zh-v1.5 model for semantic understanding
- Implements persistent storage and fast retrieval through ChromaDB
- Includes 6 memory collections: episodic, semantic, emotional, relationship, preferences, user_profile
- Implements time and importance weighted memory decay mechanism
- Supports intelligent extraction and management of user key information
- Provides memory association and spontaneous recall functionality

#### 3. Conversation Handler (`agents/conversation_handler.py`)

**ConversationHandler Class** encapsulates conversation flow logic:
- Provides simplified conversation interface supporting both sync and async calls
- Integrates emotion analysis, memory retrieval, and response generation
- Supports batch memory saving and state updates
- Includes performance statistics and error handling mechanisms

### üöÄ Performance Optimization

Mira is designed with performance and stability in mind:

**Memory Management Optimization**
- Uses ChromaDB persistent storage to effectively avoid memory overflow
- Adopts batch update strategies to reduce frequent I/O operations
- Filters by importance threshold to maintain high-quality memory database

**Retrieval Performance Optimization**
- Implements vector caching mechanism to improve repeated query speed
- Sets similarity threshold filtering (default 0.6) to ensure result relevance
- Records access frequency statistics to optimize hot data access

**Concurrent Processing Capability**
- Background tasks use asynchronous execution without blocking main dialogue flow
- Implements inter-agent message queues for reliable information transfer
- Uses non-blocking memory updates to ensure response speed

### üîç API Interface Design

The system provides clean and powerful API interfaces:

**Memory System API** - Supports memory addition, retrieval, and update functions:
- `search_memories()`: Semantic search for relevant memories
- `save_user_preference()`: Save user preferences
- `save_user_profile_info()`: Save user key information
- `update_emotion()`: Update emotional state
- `record_relationship_event()`: Record relationship development events

**Agent Tool Functions** - Includes core functions like memory search, emotion updates, preference saving

Developers can easily extend Mira's functionality through these interfaces or integrate the memory system into other projects.

### üìä Monitoring & Debugging

The system provides comprehensive monitoring and debugging tools:

**Logging System** - Automatically records conversation logs to `logs/` directory, supports daily file rotation
**Dependency Check** - Use `python scripts/check_dependencies.py` to check environment configuration
**Memory State Monitoring** - Use MemoryViewer tool to view memory database status and relationship development in real-time
**Performance Statistics** - Each conversation round displays detailed timing reports including emotion analysis, memory retrieval, thinking, and response generation times

## üéØ Core Features

### Authentic Emotional Experience
Mira is not a simple response bot, but a companion with complex emotional states. She will:
- Dynamically adjust emotions based on conversation content
- Display different communication styles under different emotions
- Remember important emotional moments and recall them at appropriate times

### Deep Memory Capabilities
Based on ChromaDB's semantic search, Mira can:
- Intelligently retrieve relevant memories based on conversation content
- Learn and remember user preferences and habits
- Establish associations and connections between memories

### Relationship Growth Mechanism
The relationship with Mira develops naturally over time:
- **Initial Contact** (Level 1-2) - Polite but distant communication
- **Getting Familiar** (Level 3-4) - Beginning to build basic trust
- **Deep Friendship** (Level 7-8) - More open and emotional communication
- **Intimate Companionship** (Level 9-10) - Deeply personalized relationship

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ü§ù Contributing

Welcome to submit Issues and Pull Requests to help improve Mira!

**Areas that especially need help:**
- üß™ Expanding unit test coverage
- üêõ Bug fixes and stability improvements
- üìö Documentation improvements and example code
- ‚ö° Performance optimization and error handling
- üåç Multi-language support expansion

## üí¨ Feedback

If you encounter problems or have suggestions during use, please feel free to create an Issue or contact the developer.

---

**Mira is waiting for your first conversation, let's start a special journey of friendship!** ‚ú®